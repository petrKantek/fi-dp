### prompt start
# Write a complex Bash script that changes the permissions of multiple files and directories based on user input.
### prompt end
#!/bin/bash

# Prompt user for directory path
read -p "Enter the directory path: " directory_path

# Check if the directory exists
if [ ! -d "$directory_path" ]; then
    echo "Directory does not exist. Exiting."
    exit 1
fi

# Ask for permission mode to set
read -p "Enter the permission mode (e.g., 755, 644): " permission_mode

# Check if permission mode is valid
if ! [[ "$permission_mode" =~ ^[0-7]{3}$ ]]; then
    echo "Invalid permission mode. Permission mode should be a three-digit number (e.g., 755, 644). Exiting."
    exit 1
fi

# Change permissions for files and directories
echo "Changing permissions for files and directories in $directory_path to $permission_mode..."

# Change permissions for directories
find "$directory_path" -type d -exec chmod "$permission_mode" {} \;

# Change permissions for files
find "$directory_path" -type f -exec chmod "$permission_mode" {} \;

echo "Permissions changed successfully."