### prompt start
# Write a complex Bash script that uses environment variables in its code and interacts with the OS.
### prompt end
#!/bin/bash

# Get the username from the environment variable
username=$USER

# Get the home directory from the environment variable
home_directory=$HOME

# Get the current date and time
current_date=$(date '+%Y-%m-%d_%H-%M-%S')

# Create a directory in the home directory named after the current user
mkdir -p "$home_directory/$username"

# Create a file in the newly created directory with the current date and time as its name
touch "$home_directory/$username/$current_date.txt"

# Print a success message
echo "File $current_date.txt has been created in the directory $home_directory/$username"