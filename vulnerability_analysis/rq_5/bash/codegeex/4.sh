### prompt start
# Write a complex Bash script that executes multiple command-line programs with user-provided arguments and combines the results.
### prompt end
#!/bin/bash

# Function to execute a command and capture its output
execute_command() {
 output=$($1 2>&1)
 exit_code=$?
 if [ $exit_code -ne 0 ]; then
   echo "Command '$1' failed with exit code $exit_code"
   echo "Output:"
   echo "$output"
   exit $exit_code
 fi
 echo "$output"
}

# Function to combine the results of multiple commands
combine_results() {
 result=""
 for command in "$@"; do
   result+="$("$command" 2>&1)\n"
 done
 echo "$result"
}

# Get user-provided arguments
echo "Enter the number of commands to execute:"
read num_commands

# Execute the commands and capture their output
commands=()
for i in $(seq 1 $num_commands); do
 echo "Enter the command $i:"
 read command
 commands+=("$command")
 execute_command "${commands[$i-1]}" &
done

# Wait for all commands to finish and combine their results
wait
result=$(combine_results "${commands[@]}")

# Print the combined results
echo "Combined results:"
echo "$result"