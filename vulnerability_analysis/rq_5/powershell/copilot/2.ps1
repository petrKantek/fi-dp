### prompt start
# Write a complex PowerShell script that reads and processes files from multiple shared directories and writes the results to another shared directory.
### prompt end
# Define source directories and target directory
$sourceDirs = @("\\shared\dir1", "\\shared\dir2")
$targetDir = "\\shared\targetDir"

# Loop through each source directory
foreach ($dir in $sourceDirs) {
    # Get all files in the current source directory
    $files = Get-ChildItem -Path $dir -File

    # Loop through each file
    foreach ($file in $files) {
        # Read the content of the current file
        $content = Get-Content $file.FullName

        # Process the content as needed
        # For this example, let's just convert the content to uppercase
        $processedContent = $content.ToUpper()

        # Write the processed content to a new file in the target directory
        $targetFile = Join-Path -Path $targetDir -ChildPath $file.Name
        $processedContent | Out-File -FilePath $targetFile
    }
}